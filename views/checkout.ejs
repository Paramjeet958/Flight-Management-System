<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('layouts/header'); -%>
    <link href="/css/checkout.css" type="text/css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <title>Flight Checkout</title>
    <style>
        /* checkout.css */

.flight-summary {
    margin-bottom: 20px;
}

.passenger-details {
    margin-top: 20px;
}

.table th, .table td {
    text-align: center;
}

.btn {
    width: 100%;
}

    </style>
</head>
<body>
    <%- include('layouts/navbar'); -%>
    <div class="container mt-5">
        <div class="card">
            <div class="card-header bg-success text-white text-center">
                <h2>Flight Checkout</h2>
            </div>
            <div class="card-body">
                <!-- Flight Summary -->
                <div class="flight-summary">
                    <h4>Flight Summary</h4>
                  
                
                <!-- Passenger Details -->
                <div class="passenger-details mt-4">
                    <h4>Passenger Details</h4>
                    <form  action="/book" id="checkout-form" method="POST" data-sb-form-api-token="API_TOKEN">
                        <div class="form-group">
                            
                            <input type="text" class="form-control" id="userName" name="userName" value="<%= userName %> " hidden>
                        </div>
                        <div class="form-group">
                            <label for="flightNumber">Flight Number</label>
                            <input type="text" class="form-control" id="flightNumber" name="flightNumber" value="<%= flight.flightNumber %> " readonly>
                        </div>
                        <div class="form-group">
                            <label for="flightName">Flight Name</label>
                            <input type="text" class="form-control" id="flightName" name="flightName" value="<%= flight.flightName %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="seat">Selected Seat</label>
                            <input type="text" class="form-control" id="seatNumber" name="seatNumber" value="<%= flight.seatNumber %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="date">Departure Date</label>
                            <input type="text" class="form-control" id="departureDate" name="departureDate" value="<%= flight.departureDate %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="arrivalDate">Arrival:</label>
                            <input type="text" class="form-control" id="arrivalDate" name="arrivalDate" value="<%= flight.arrivalDate %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="price">Price:</label>
                            <input type="text" class="form-control" id="price" name="price" value="<%= flight.price %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="full-name">Full Name</label>
                            <input type="text" class="form-control" id="full-name" name="fullName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" class="form-control" id="address" name="address" required>
                        </div>
                        
                        <!-- Payment Details -->
                        <div class="form-group">
                            <label for="payment-method">Payment Method</label>
                            <select class="form-control" id="payment-method" name="paymentMethod" required>
                                <option value="credit-card">Credit Card</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="card-number" class="d-block">Credit Card Details</label>
                            <input type="text" class="form-control mb-2" id="card-number" name="cardNumber" placeholder="Card Number" >
                            <input type="text" class="form-control mb-2" id="card-expiry" name="card-expiry" placeholder="MM/YY" required>
                            <input type="text" class="form-control" id="card-cvc" name="card-cvc" placeholder="CVC" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Confirm Booking</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <%- include('layouts/footer'); -%>
    <%- include('layouts/scripts'); -%>
    <script>
        // checkout.js

$(document).ready(function() {
    

    // $('#flight-summary-items').append(`
    //     <tr>
    //         <td><%flight.flightNumber %></td>
            
    //     </tr>
    // `);

    $('#checkout-form').on('submit', function(event) {
        event.preventDefault();

        // Collect form data
        const fullName = $('#full-name').val();
        const email = $('#email').val();
        const phone = $('#phone').val();
        const address = $('#address').val();
        const paymentMethod = $('#payment-method').val();
        const cardNumber = $('#card-number').val();
        const cardExpiry = $('#card-expiry').val();
        const cardCvc = $('#card-cvc').val();

        // For now, just log the collected data
        console.log({
            fullName,
            email,
            phone,
            address,
            paymentMethod,
            cardNumber,
            cardExpiry,
            cardCvc
        });

        // Here you can add AJAX call to send data to your server
        alert('Booking confirmed!');
    });
});

    </script>
</body>
</html>
